(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./.storybook/decorators/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Component_ComponentDecorator}));__webpack_require__("./node_modules/antd/dist/antd.css"),__webpack_require__("./src/i18n/index.tsx");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Component_ComponentDecorator=function ComponentDecorator(Story){return Object(jsx_runtime.jsx)(Story,{})};Component_ComponentDecorator.displayName="ComponentDecorator";try{Component_ComponentDecorator.displayName="ComponentDecorator",Component_ComponentDecorator.__docgenInfo={description:"",displayName:"ComponentDecorator",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES[".storybook/decorators/Component.tsx#ComponentDecorator"]={docgenInfo:Component_ComponentDecorator.__docgenInfo,name:"ComponentDecorator",path:".storybook/decorators/Component.tsx#ComponentDecorator"})}catch(__react_docgen_typescript_loader_error){}},"./.storybook/preview.js-generated-config-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/builder-webpack4/node_modules/@storybook/client-api/dist/esm/ClientApi.js"),esm=__webpack_require__("./node_modules/@storybook/client-logger/dist/esm/index.js"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(ClientApi.d)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(ClientApi.e)(loader,!1)}));case"parameters":return Object(ClientApi.f)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.b)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.c)(enhancer)}));case"render":return Object(ClientApi.g)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(ClientApi.f)(v,!1);case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./generated-stories-entry.js":function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.mdx)$"),__webpack_require__("./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$")],module,!1)}).call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$":function(module,exports,__webpack_require__){var map={"./frontend/components/EditGameObject/index.stories.tsx":"./src/frontend/components/EditGameObject/index.stories.tsx","./frontend/components/EditToolbar/index.stories.tsx":"./src/frontend/components/EditToolbar/index.stories.tsx","./frontend/components/FullPageLoader/index.stories.tsx":"./src/frontend/components/FullPageLoader/index.stories.tsx","./frontend/components/RegisterModal/index.stories.tsx":"./src/frontend/components/RegisterModal/index.stories.tsx","./frontend/components/TempRegister/index.stories.tsx":"./src/frontend/components/TempRegister/index.stories.tsx","./frontend/components/Video/Video.stories.tsx":"./src/frontend/components/Video/Video.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$"},"./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.mdx)$":function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id="./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.mdx)$"},"./src/constants/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return REGISTRY_CHANGE_EDIT_TOOL})),__webpack_require__.d(__webpack_exports__,"a",(function(){return FONT_DEFAULT})),__webpack_require__.d(__webpack_exports__,"b",(function(){return GAME_TILE_HEIGHT}));var REGISTRY_CHANGE_EDIT_TOOL="REGISTRY_CHANGE_EDIT_TOOL",FONT_DEFAULT="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'",GAME_TILE_HEIGHT=30},"./src/frontend/components/EditGameObject/index.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return index_stories_Default})),__webpack_require__.d(__webpack_exports__,"DeskDefault",(function(){return index_stories_DeskDefault}));var slicedToArray=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),es_form=(__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/antd/es/form/index.js")),react=__webpack_require__("./node_modules/react/index.js"),decorators=__webpack_require__("./.storybook/decorators/index.ts"),gameobjects=__webpack_require__("./src/game/gameobjects/index.ts"),es_select=(__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/antd/es/select/index.js")),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Option=es_select.a.Option,DeskForm_DeskForm=function DeskForm(_ref){var players=_ref.players,form=_ref.form,deskSettings=_ref.deskSettings,t=Object(useTranslation.a)().t;return Object(jsx_runtime.jsx)(es_form.a,{form:form,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:deskSettings,onFinishFailed:function onFinishFailed(errorInfo){console.log("Failed:",errorInfo)},autoComplete:"off",children:Object(jsx_runtime.jsx)(es_form.a.Item,{label:t("Desk owner"),name:"ownerId",children:Object(jsx_runtime.jsx)(es_select.a,{placeholder:t("Select Desk owner"),allowClear:!0,onChange:function onSelect(value){form.setFieldsValue({ownerId:value})},children:players.map((function(player){return Object(jsx_runtime.jsx)(Option,{value:player.id,children:player.username},player.id)}))})})})};DeskForm_DeskForm.displayName="DeskForm";try{DeskForm_DeskForm.displayName="DeskForm",DeskForm_DeskForm.__docgenInfo={description:"",displayName:"DeskForm",props:{players:{defaultValue:null,description:"",name:"players",required:!0,type:{name:"Player[]"}},form:{defaultValue:null,description:"",name:"form",required:!0,type:{name:"FormInstance<DeskSettings>"}},deskSettings:{defaultValue:null,description:"",name:"deskSettings",required:!0,type:{name:"DeskSettings"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/components/EditGameObject/DeskForm.tsx#DeskForm"]={docgenInfo:DeskForm_DeskForm.__docgenInfo,name:"DeskForm",path:"src/frontend/components/EditGameObject/DeskForm.tsx#DeskForm"})}catch(__react_docgen_typescript_loader_error){}var modal=__webpack_require__("./node_modules/antd/es/modal/index.js"),es_button=__webpack_require__("./node_modules/antd/es/button/index.js"),EditGameObjectModal_EditGameObjectModal=function EditGameObjectModal(_ref){var gameObjecType=_ref.gameObjectType,children=_ref.children,form=_ref.form,onClose=_ref.onClose,onCancel=_ref.onCancel,onDelete=_ref.onDelete,onFinish=_ref.onFinish,isVisible=_ref.isVisible,t=Object(useTranslation.a)().t;return Object(jsx_runtime.jsx)(modal.a,{title:t("Edit Game Object title "+gameObjecType),visible:isVisible,onOk:function onOk(){},onCancel:onCancel,destroyOnClose:!0,afterClose:function afterClose(){return onClose()},footer:[Object(jsx_runtime.jsx)(es_button.a,{danger:!0,style:{marginLeft:0},onClick:onDelete,children:t("Delete")},"back"),Object(jsx_runtime.jsx)(es_button.a,{onClick:onCancel,children:t("Cancel")},"cancel"),Object(jsx_runtime.jsx)(es_button.a,{type:"primary",onClick:function onClick(){form.submit(),onFinish(form.getFieldsValue())},children:t("Save")},"link")],children:children})};EditGameObjectModal_EditGameObjectModal.displayName="EditGameObjectModal";try{EditGameObjectModal_EditGameObjectModal.displayName="EditGameObjectModal",EditGameObjectModal_EditGameObjectModal.__docgenInfo={description:"",displayName:"EditGameObjectModal",props:{gameObjectType:{defaultValue:null,description:"",name:"gameObjectType",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"desk"'},{value:'"toilet"'}]}},form:{defaultValue:null,description:"",name:"form",required:!0,type:{name:"FormInstance<Settings>"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => void"}},onFinish:{defaultValue:null,description:"",name:"onFinish",required:!0,type:{name:"(settings: Settings) => any"}},isVisible:{defaultValue:null,description:"",name:"isVisible",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/components/EditGameObject/EditGameObjectModal.tsx#EditGameObjectModal"]={docgenInfo:EditGameObjectModal_EditGameObjectModal.__docgenInfo,name:"EditGameObjectModal",path:"src/frontend/components/EditGameObject/EditGameObjectModal.tsx#EditGameObjectModal"})}catch(__react_docgen_typescript_loader_error){}var index_stories_players=[{id:"1",username:"flo1",firstname:"floo",is_online:!0,is_audio_video_enabled:!1,tile:{x:1,y:1},sprite:{id:"2323",name:"string",url:"string",settings:{frameHeight:10,frameWidth:10}}},{id:"2",username:"flo2",firstname:"floo",is_online:!0,is_audio_video_enabled:!1,tile:{x:1,y:1},sprite:{id:"2323",name:"string",url:"string",settings:{frameHeight:10,frameWidth:10}}},{id:"3",username:"flo3",firstname:"floo",is_online:!0,is_audio_video_enabled:!1,tile:{x:1,y:1},sprite:{id:"2323",name:"string",url:"string",settings:{frameHeight:10,frameWidth:10}}}],index_stories_Default=(__webpack_exports__.default={title:"EditGameObject",decorators:[decorators.a],component:EditGameObjectModal_EditGameObjectModal},function Default(){var _useState=Object(react.useState)(!0),_useState2=Object(slicedToArray.a)(_useState,2),isVisible=_useState2[0],setIsVisible=_useState2[1],_Form$useForm=es_form.a.useForm(),form=Object(slicedToArray.a)(_Form$useForm,1)[0];return Object(jsx_runtime.jsx)(EditGameObjectModal_EditGameObjectModal,{onFinish:function onFinish(){},gameObjectType:gameobjects.b.Desk,form:form,onClose:function onClose(){},onDelete:function onDelete(){},onCancel:function onCancel(){return setIsVisible(!1)},isVisible:isVisible,children:Object(jsx_runtime.jsx)(DeskForm_DeskForm,{players:index_stories_players,form:form,deskSettings:{occupiedTiles:[],ownerId:index_stories_players[1].id}})})});index_stories_Default.displayName="Default";var index_stories_DeskDefault=function DeskDefault(){var _Form$useForm3=es_form.a.useForm(),form=Object(slicedToArray.a)(_Form$useForm3,1)[0];return Object(jsx_runtime.jsx)(DeskForm_DeskForm,{players:index_stories_players,form:form,deskSettings:{occupiedTiles:[],ownerId:index_stories_players[1].id}})};index_stories_DeskDefault.displayName="DeskDefault",index_stories_Default.parameters=Object.assign({storySource:{source:"() => {\n  const [isVisible, setIsVisible] = useState(true)\n  const [form] = Form.useForm()\n  return (\n    <EditGameObjectModal\n      onFinish={() => {}}\n      gameObjectType={PlaceObjectsTypes.Desk}\n      form={form}\n      onClose={() => {}}\n      onDelete={() => {}}\n      onCancel={() => setIsVisible(false)}\n      isVisible={isVisible}\n    >\n      <DeskForm\n        players={players}\n        form={form}\n        deskSettings={{\n          occupiedTiles: [],\n          ownerId: players[1].id,\n        }}\n      />\n    </EditGameObjectModal>\n  )\n}"}},index_stories_Default.parameters),index_stories_DeskDefault.parameters=Object.assign({storySource:{source:"() => {\n  const [form] = Form.useForm()\n  return (\n    <DeskForm\n      players={players}\n      form={form}\n      deskSettings={{\n        occupiedTiles: [],\n        ownerId: players[1].id,\n      }}\n    />\n  )\n}"}},index_stories_DeskDefault.parameters)},"./src/frontend/components/EditToolbar/index.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return index_stories_Default}));var slicedToArray=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),decorators=(__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./.storybook/decorators/index.ts")),react=__webpack_require__("./node_modules/react/index.js"),classCallCheck=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),regenerator=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),createClass=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),mobx_esm=(__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/mobx/dist/mobx.esm.js")),dist=__webpack_require__("./node_modules/@remotify/graphql/dist/index.js"),PlayerStore_PlayerStore=function(){function PlayerStore(graphQl,userId,roomId,api){var _this=this;Object(classCallCheck.a)(this,PlayerStore),this.player=void 0,this.players=[],this.otherOnlinePlayers=[],this.subscription=void 0,this.updatePlayerOnline=function(){var _ref=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(isOnline){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,_this.api.updatePlayer({object:{is_online:isOnline},id:_this.userId});case 3:_context.next=8;break;case 5:_context.prev=5,_context.t0=_context.catch(0),console.error("update player failed",_context.t0);case 8:case"end":return _context.stop()}}),_callee,null,[[0,5]])})));return function(_x){return _ref.apply(this,arguments)}}(),this.listenForPlayerUpdates=function(){var _next;_this.subscription=_this.graphQl.subscribe({query:dist.subscribeToPlayersOfRoom,variables:{roomId:_this.roomId}}).subscribe({next:(_next=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(_ref2){var data,players,player;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(data=_ref2.data,console.log("got player updates",data),null==data||!data.player){_context2.next=10;break}return _context2.next=5,_this.fetchPlayers();case 5:players=_context2.sent,_this.setPlayers(players),player=players.find((function(_ref3){return _ref3.id===_this.userId})),_this.setOtherOnlinePlayers(players.filter((function(_ref4){var id=_ref4.id,is_online=_ref4.is_online;return id!==_this.userId&&!0===is_online}))),player?_this.setPlayer(player):console.error("cannot find current player in players ;(",players);case 10:case"end":return _context2.stop()}}),_callee2)}))),function next(_x2){return _next.apply(this,arguments)}),error:function error(_error){console.error("on error",_error)}})},this.setPlayers=function(players){_this.players=players},this.setOtherOnlinePlayers=function(players){console.log("setting other online players",players),_this.otherOnlinePlayers=players},this.setPlayer=function(player){console.log("setting player",player),_this.player=player},Object(mobx_esm.e)(this,{players:mobx_esm.f.ref,player:mobx_esm.f,otherOnlinePlayers:mobx_esm.f,setPlayers:mobx_esm.b,setPlayer:mobx_esm.b,setOtherOnlinePlayers:mobx_esm.b})}var _fetchPlayers;return Object(createClass.a)(PlayerStore,[{key:"fetchPlayers",value:(_fetchPlayers=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee3(){var _players$data,players;return regenerator_default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,_context3.next=3,this.graphQl.query({query:dist.getPlayersOfRoom,variables:{roomId:this.roomId},fetchPolicy:"no-cache"});case 3:return players=_context3.sent,console.log("fetch player result",players),_context3.abrupt("return",(null==players||null===(_players$data=players.data)||void 0===_players$data?void 0:_players$data.player)||[]);case 8:return _context3.prev=8,_context3.t0=_context3.catch(0),console.error("error fetching players",_context3.t0),_context3.abrupt("return",[]);case 12:case"end":return _context3.stop()}}),_callee3,this,[[0,8]])}))),function fetchPlayers(){return _fetchPlayers.apply(this,arguments)})},{key:"destruct",value:function destruct(){var _this$subscription;null===(_this$subscription=this.subscription)||void 0===_this$subscription||_this$subscription.unsubscribe()}}]),PlayerStore}(),GameObjectStore_GameObjectStore=function(){function GameObjectStore(graphQl,api,roomId){var _this=this;Object(classCallCheck.a)(this,GameObjectStore),this.gameObjects=[],this.gameObjectTypes=[],this.fetchGameObjectTypes=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(){var gameObjectTypes;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,_this.api.getGameObjectTypes();case 3:gameObjectTypes=_context.sent,_this.setGameObjectTypes(gameObjectTypes),_context.next=11;break;case 7:throw _context.prev=7,_context.t0=_context.catch(0),console.error("cannot fetch",_context.t0),new Error("cannot fetch game object types");case 11:case"end":return _context.stop()}}),_callee,null,[[0,7]])}))),this.setGameObjects=function(gameObjects){_this.gameObjects=gameObjects},this.setGameObjectTypes=function(gameObjectTypes){_this.gameObjectTypes=gameObjectTypes},console.log("init game object store"),this._listenForGameObjectChange(),this.fetchGameObjectTypes(),Object(mobx_esm.e)(this,{gameObjects:mobx_esm.f.ref,gameObjectTypes:mobx_esm.f.ref,setGameObjects:mobx_esm.b,setGameObjectTypes:mobx_esm.b})}return Object(createClass.a)(GameObjectStore,[{key:"_listenForGameObjectChange",value:function _listenForGameObjectChange(){var _this2=this;this.graphQl.subscribe({query:dist.subscribeToGameObjectsOfRoom,variables:{room_id:this.roomId}}).subscribe(function(){var _ref3=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee2(_ref2){var data,_gameObjects$data,gameObjects;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return data=_ref2.data,console.log("got updated gameobjects",data),_context2.prev=2,_context2.next=5,_this2.graphQl.query({query:dist.getGameObjectsByRoomId,variables:{roomId:_this2.roomId},fetchPolicy:"no-cache"});case 5:null!=(gameObjects=_context2.sent)&&null!==(_gameObjects$data=gameObjects.data)&&void 0!==_gameObjects$data&&_gameObjects$data.gameobject&&_this2.setGameObjects(gameObjects.data.gameobject),_context2.next=12;break;case 9:_context2.prev=9,_context2.t0=_context2.catch(2),console.log("cannot receive game objects by room id",_context2.t0);case 12:case"end":return _context2.stop()}}),_callee2,null,[[2,9]])})));return function(_x){return _ref3.apply(this,arguments)}}(),(function(error){console.error("on error",error)}))}}]),GameObjectStore}(),GameStore_GameStore=function GameStore(){var _this=this;Object(classCallCheck.a)(this,GameStore),this.isEditMode=!1,this.game=void 0,this.setIsEditMode=function(isEditMode){_this.isEditMode=isEditMode},this.setGame=function(game){_this.game=game},Object(mobx_esm.e)(this,{isEditMode:mobx_esm.f,game:mobx_esm.f.ref,setIsEditMode:mobx_esm.b,setGame:mobx_esm.b})},UserMediaStore_UserMediaStore=function UserMediaStore(){var _this=this;Object(classCallCheck.a)(this,UserMediaStore),this.userMediaStream=void 0,this.isVideoStreamingReady=!1,this.setUserMediaStream=function(userMediaStream){_this.userMediaStream=userMediaStream},this.setIsVideoStreamingReady=function(isVideoStreamingReady){_this.isVideoStreamingReady=isVideoStreamingReady},Object(mobx_esm.e)(this,{userMediaStream:mobx_esm.f,isVideoStreamingReady:mobx_esm.f,setUserMediaStream:mobx_esm.b,setIsVideoStreamingReady:mobx_esm.b})},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),StoreContext_Stores=function Stores(props){Object(classCallCheck.a)(this,Stores),this.playerStore=void 0,this.gameStore=void 0,this.userMediaStore=void 0,this.roomStore=void 0,this.gameObjectStore=void 0,this.clientStore=void 0,this.playerStore=new PlayerStore_PlayerStore(props.graphQl,props.userId,props.roomId,props.api),this.playerStore.listenForPlayerUpdates(),this.gameStore=new GameStore_GameStore,this.userMediaStore=new UserMediaStore_UserMediaStore,this.gameObjectStore=new GameObjectStore_GameObjectStore(props.graphQl,props.api,props.roomId),this.roomStore=new RoomStore_RoomStore(props.graphQl,props.roomId),this.clientStore=new ClientStore_ClientStore(props.api)},StoreContext=Object(react.createContext)(void 0),StoreContext_StoreContextProvider=function StoreContextProvider(props){var value=Object(react.useMemo)((function(){return new StoreContext_Stores(props)}),[]);return Object(jsx_runtime.jsx)(StoreContext.Provider,{value:value,children:props.children})};StoreContext_StoreContextProvider.displayName="StoreContextProvider";try{StoreContext_StoreContextProvider.displayName="StoreContextProvider",StoreContext_StoreContextProvider.__docgenInfo={description:"",displayName:"StoreContextProvider",props:{roomId:{defaultValue:null,description:"",name:"roomId",required:!0,type:{name:"string"}},userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}},graphQl:{defaultValue:null,description:"",name:"graphQl",required:!0,type:{name:"ApolloClient<any>"}},api:{defaultValue:null,description:"",name:"api",required:!0,type:{name:"ApiInterface"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/state/stores/StoreContext.tsx#StoreContextProvider"]={docgenInfo:StoreContext_StoreContextProvider.__docgenInfo,name:"StoreContextProvider",path:"src/state/stores/StoreContext.tsx#StoreContextProvider"})}catch(__react_docgen_typescript_loader_error){}var RoomStore_RoomStore=function(){function RoomStore(graphQl,roomId){var _this=this;Object(classCallCheck.a)(this,RoomStore),this.room=void 0,this.setRoom=function(room){_this.room=room},this._listenRoomChange(),Object(mobx_esm.e)(this,{room:mobx_esm.f,setRoom:mobx_esm.b})}return Object(createClass.a)(RoomStore,[{key:"_listenRoomChange",value:function _listenRoomChange(){var _this2=this;this.graphQl.subscribe({query:dist.subscribeToRoom,variables:{roomId:this.roomId}}).subscribe(function(){var _ref2=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(_ref){var data,_room$data,room;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return data=_ref.data,console.log("room update",data),_context.prev=2,_context.next=5,_this2.graphQl.query({query:dist.getRoomByPk,variables:{roomId:_this2.roomId},fetchPolicy:"no-cache"});case 5:null!=(room=_context.sent)&&null!==(_room$data=room.data)&&void 0!==_room$data&&_room$data.room_by_pk&&_this2.setRoom(room.data.room_by_pk),_context.next=12;break;case 9:_context.prev=9,_context.t0=_context.catch(2),console.log("cannot receive game objects by room id",_context.t0);case 12:case"end":return _context.stop()}}),_callee,null,[[2,9]])})));return function(_x){return _ref2.apply(this,arguments)}}(),(function(error){console.error("on error",error)}))}}]),RoomStore}(),ClientStore_ClientStore=(__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),function ClientStore(api){var _this=this;Object(classCallCheck.a)(this,ClientStore),this.client=void 0,this.fetchClient=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(){var client;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,_this.api.getClientWithRoomsAndPlayers();case 3:if((client=_context.sent)&&Array.isArray(client)&&0!==client.length){_context.next=7;break}throw console.error("client",client),new Error("invalid response");case 7:_this.setClient(client[0]),_context.next=13;break;case 10:_context.prev=10,_context.t0=_context.catch(0),console.error("cannot fetch client",_context.t0);case 13:case"end":return _context.stop()}}),_callee,null,[[0,10]])}))),this.setClient=function(client){_this.client=client},this.fetchClient(),Object(mobx_esm.e)(this,{client:mobx_esm.f,setClient:mobx_esm.b})}),moq_ts=__webpack_require__("./node_modules/moq.ts/fesm2015/moq.ts.js"),defaultStoresMock=(new moq_ts.a).object(),StoreContext_StoreContextMock=function StoreContextMock(props){return Object(jsx_runtime.jsx)(StoreContext.Provider,{value:props.stores||defaultStoresMock,children:props.children})};StoreContext_StoreContextMock.displayName="StoreContextMock";try{StoreContext_StoreContextMock.displayName="StoreContextMock",StoreContext_StoreContextMock.__docgenInfo={description:"",displayName:"StoreContextMock",props:{stores:{defaultValue:null,description:"",name:"stores",required:!1,type:{name:"Stores"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES[".storybook/mocks/StoreContext.tsx#StoreContextMock"]={docgenInfo:StoreContext_StoreContextMock.__docgenInfo,name:"StoreContextMock",path:".storybook/mocks/StoreContext.tsx#StoreContextMock"})}catch(__react_docgen_typescript_loader_error){}var EditToolTypes,hooks=__webpack_require__("./node_modules/@storybook/addons/dist/esm/hooks.js"),taggedTemplateLiteralLoose=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteralLoose.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),DragOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/DragOutlined.js"),EditOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/EditOutlined.js"),AppstoreAddOutlined=__webpack_require__("./node_modules/@ant-design/icons/es/icons/AppstoreAddOutlined.js"),constants=__webpack_require__("./src/constants/index.ts"),phaser=__webpack_require__("./node_modules/phaser/dist/phaser.js"),toConsumableArray=(phaser.Input.Events,phaser.Input.Events,__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js")),inherits=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),createSuper=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js"),utils=(__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./src/game/utils/index.ts")),gameobjects=__webpack_require__("./src/game/gameobjects/index.ts"),models=__webpack_require__("./src/models/index.ts"),PlaceGameObject_PhaserEvents=phaser.Input.Events;utils.a;!function(EditToolTypes){EditToolTypes.Drag="drag",EditToolTypes.DrawWall="draw_wall",EditToolTypes.DrawFloor="draw_floor",EditToolTypes.PlaceObjects="place_objects"}(EditToolTypes||(EditToolTypes={}));var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),Toolbar=styled_components_browser_esm.a.div(_templateObject||(_templateObject=Object(taggedTemplateLiteralLoose.a)(["\n  background-color: white;\n  position: absolute;\n  pointer-events: all;\n  padding: 5px;\n  display: flex;\n"]))),ToolbarRight=Object(styled_components_browser_esm.a)(Toolbar)(_templateObject2||(_templateObject2=Object(taggedTemplateLiteralLoose.a)(["\n  right: 0;\n  top: 50%;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n  transform: translate(0, -50%);\n"]))),ToolbarBottom=Object(styled_components_browser_esm.a)(Toolbar)(_templateObject3||(_templateObject3=Object(taggedTemplateLiteralLoose.a)(["\n  bottom: 0;\n  margin: 0;\n  align-items: flex-start;\n  flex-direction: row;\n  right: 0;\n"]))),Toolbar_createToolbarButton=function createToolbarButton(button){return Object(styled_components_browser_esm.a)(button)(_templateObject4||(_templateObject4=Object(taggedTemplateLiteralLoose.a)(["\n  font-size: 30px;\n  border: 1px solid grey;\n  ","\n"])),(function(props){return!0===props.isActive?"background-color: lightgrey;":""}))},Label=styled_components_browser_esm.a.p(_templateObject5||(_templateObject5=Object(taggedTemplateLiteralLoose.a)(["\n  margin-bottom: 2px;\n  font-size: 10px;\n"]))),ToolbarItem=styled_components_browser_esm.a.div(_templateObject6||(_templateObject6=Object(taggedTemplateLiteralLoose.a)(["\n  text-align: center;\n  margin-right: 5px;\n  width: 50px;\n"])));try{Toolbar.displayName="Toolbar",Toolbar.__docgenInfo={description:"",displayName:"Toolbar",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/components/Toolbar/index.tsx#Toolbar"]={docgenInfo:Toolbar.__docgenInfo,name:"Toolbar",path:"src/frontend/components/Toolbar/index.tsx#Toolbar"})}catch(__react_docgen_typescript_loader_error){}try{ToolbarRight.displayName="ToolbarRight",ToolbarRight.__docgenInfo={description:"",displayName:"ToolbarRight",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/components/Toolbar/index.tsx#ToolbarRight"]={docgenInfo:ToolbarRight.__docgenInfo,name:"ToolbarRight",path:"src/frontend/components/Toolbar/index.tsx#ToolbarRight"})}catch(__react_docgen_typescript_loader_error){}try{ToolbarBottom.displayName="ToolbarBottom",ToolbarBottom.__docgenInfo={description:"",displayName:"ToolbarBottom",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/components/Toolbar/index.tsx#ToolbarBottom"]={docgenInfo:ToolbarBottom.__docgenInfo,name:"ToolbarBottom",path:"src/frontend/components/Toolbar/index.tsx#ToolbarBottom"})}catch(__react_docgen_typescript_loader_error){}try{Toolbar_createToolbarButton.displayName="createToolbarButton",Toolbar_createToolbarButton.__docgenInfo={description:"",displayName:"createToolbarButton",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/components/Toolbar/index.tsx#createToolbarButton"]={docgenInfo:Toolbar_createToolbarButton.__docgenInfo,name:"createToolbarButton",path:"src/frontend/components/Toolbar/index.tsx#createToolbarButton"})}catch(__react_docgen_typescript_loader_error){}try{Label.displayName="Label",Label.__docgenInfo={description:"",displayName:"Label",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLParagraphElement | null) => void) | RefObject<HTMLParagraphElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/components/Toolbar/index.tsx#Label"]={docgenInfo:Label.__docgenInfo,name:"Label",path:"src/frontend/components/Toolbar/index.tsx#Label"})}catch(__react_docgen_typescript_loader_error){}try{ToolbarItem.displayName="ToolbarItem",ToolbarItem.__docgenInfo={description:"",displayName:"ToolbarItem",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/components/Toolbar/index.tsx#ToolbarItem"]={docgenInfo:ToolbarItem.__docgenInfo,name:"ToolbarItem",path:"src/frontend/components/Toolbar/index.tsx#ToolbarItem"})}catch(__react_docgen_typescript_loader_error){}var EditToolbar_templateObject,es=__webpack_require__("./node_modules/mobx-react-lite/es/index.js"),EditToolbar_Label=styled_components_browser_esm.a.p(EditToolbar_templateObject||(EditToolbar_templateObject=Object(taggedTemplateLiteralLoose.a)(["\n  margin-bottom: 2px;\n  font-size: 10px;\n"]))),DragOutlinedButton=Toolbar_createToolbarButton(DragOutlined.a),EditOutlinedButton=Toolbar_createToolbarButton(EditOutlined.a),AppstoreAddOutlinedButton=Toolbar_createToolbarButton(AppstoreAddOutlined.a),EditToolbar=Object(es.a)((function(_ref){var activeEditTool=_ref.activeEditTool,setActiveEditTool=_ref.setActiveEditTool,_useStoreContext$game=function useStoreContext(){var context=Object(react.useContext)(StoreContext);if(!context)throw Error("Application context is not ready");return context}().gameStore,isEditMode=_useStoreContext$game.isEditMode,game=_useStoreContext$game.game,t=Object(useTranslation.a)().t,setActiveEditToolType=function setActiveEditToolType(editToolType){setActiveEditTool(editToolType),null==game||game.registry.set(constants.c,editToolType)};return isEditMode?Object(jsx_runtime.jsxs)(ToolbarRight,{children:[Object(jsx_runtime.jsx)(DragOutlinedButton,{isActive:activeEditTool===EditToolTypes.Drag,onClick:function onClick(){return setActiveEditToolType(EditToolTypes.Drag)}}),Object(jsx_runtime.jsx)(EditToolbar_Label,{children:t("Drag")}),Object(jsx_runtime.jsx)(EditOutlinedButton,{isActive:activeEditTool===EditToolTypes.DrawWall,onClick:function onClick(){return setActiveEditToolType(EditToolTypes.DrawWall)}}),Object(jsx_runtime.jsx)(EditToolbar_Label,{children:t("Draw Wall")}),Object(jsx_runtime.jsx)(EditOutlinedButton,{isActive:activeEditTool===EditToolTypes.DrawFloor,onClick:function onClick(){return setActiveEditToolType(EditToolTypes.DrawFloor)}}),Object(jsx_runtime.jsx)(EditToolbar_Label,{children:t("Draw Floor")}),Object(jsx_runtime.jsx)(AppstoreAddOutlinedButton,{isActive:activeEditTool===EditToolTypes.PlaceObjects,onClick:function onClick(){return setActiveEditToolType(EditToolTypes.PlaceObjects)}}),Object(jsx_runtime.jsx)(EditToolbar_Label,{children:t("Place Objects")})]}):Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{})}));try{EditToolbar.displayName="EditToolbar",EditToolbar.__docgenInfo={description:"",displayName:"EditToolbar",props:{activeEditTool:{defaultValue:null,description:"",name:"activeEditTool",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"drag"'},{value:'"draw_wall"'},{value:'"draw_floor"'},{value:'"place_objects"'}]}},setActiveEditTool:{defaultValue:null,description:"",name:"setActiveEditTool",required:!0,type:{name:"(editTool: EditToolType) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/components/EditToolbar/index.tsx#EditToolbar"]={docgenInfo:EditToolbar.__docgenInfo,name:"EditToolbar",path:"src/frontend/components/EditToolbar/index.tsx#EditToolbar"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"EditToolbar",decorators:[decorators.a],component:EditToolbar,argTypes:{activeEditTool:{options:EditToolTypes,control:{type:"radio"},data:{type:"enum"}},isActive:{control:{type:"boolean"},data:{type:"boolean"}}},args:{activeEditTool:EditToolTypes.DrawFloor,isActive:!0}};var index_stories_Default=function Default(args){var _useArgs=Object(hooks.c)(),_useArgs2=Object(slicedToArray.a)(_useArgs,2),_useArgs2$=_useArgs2[0],activeEditTool=_useArgs2$.activeEditTool,isActive=_useArgs2$.isActive,updateArgs=_useArgs2[1],storesMock=(new moq_ts.a).setup((function(instance){return instance.gameStore})).returns({isEditMode:isActive,setIsEditMode:function setIsEditMode(){},setGame:function setGame(){}}).object();return Object(jsx_runtime.jsx)(StoreContext_StoreContextMock,{stores:storesMock,children:Object(jsx_runtime.jsx)("div",{style:{position:"relative",height:"300px",width:"100%"},children:Object(jsx_runtime.jsx)(EditToolbar,{activeEditTool:activeEditTool,setActiveEditTool:function setActiveEditTool(activeEditTool){updateArgs({activeEditTool:activeEditTool})}})})})};index_stories_Default.displayName="Default",index_stories_Default.parameters=Object.assign({storySource:{source:"(args: Args) => {\n  const [{ activeEditTool, isActive }, updateArgs] = useArgs()\n\n  const storesMock = new Mock<Stores>()\n    .setup((instance) => instance.gameStore)\n    .returns({\n      isEditMode: isActive,\n      setIsEditMode: () => {},\n      setGame: () => {},\n    })\n    .object()\n\n  return (\n    <StoreContextMock stores={storesMock}>\n      <div style={{ position: 'relative', height: '300px', width: '100%' }}>\n        <EditToolbar\n          activeEditTool={activeEditTool}\n          setActiveEditTool={(activeEditTool: EditToolTypes) => {\n            updateArgs({ activeEditTool })\n          }}\n        />\n      </div>\n    </StoreContextMock>\n  )\n}"}},index_stories_Default.parameters);try{index_stories_Default.displayName="Default",index_stories_Default.__docgenInfo={description:"",displayName:"Default",props:{activeEditTool:{defaultValue:null,description:"",name:"activeEditTool",required:!0,type:{name:"enum",value:[{value:"undefined"},{value:'"drag"'},{value:'"draw_wall"'},{value:'"draw_floor"'},{value:'"place_objects"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/components/EditToolbar/index.stories.tsx#Default"]={docgenInfo:index_stories_Default.__docgenInfo,name:"Default",path:"src/frontend/components/EditToolbar/index.stories.tsx#Default"})}catch(__react_docgen_typescript_loader_error){}},"./src/frontend/components/FullPageLoader/index.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return index_stories_Default}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var _templateObject,_templateObject2,taggedTemplateLiteralLoose=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteralLoose.js"),styled_components_browser_esm=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js")),spin=__webpack_require__("./node_modules/antd/es/spin/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),FullPage=styled_components_browser_esm.a.div(_templateObject||(_templateObject=Object(taggedTemplateLiteralLoose.a)(["\n  background-color: black;\n  position: absolute;\n  top: 0;\n  bottom: 0%;\n  left: 0;\n  right: 0%;\n  background-color: white;\n  z-index: 99;\n"]))),Center=styled_components_browser_esm.a.div(_templateObject2||(_templateObject2=Object(taggedTemplateLiteralLoose.a)(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  /* bring your own prefixes */\n  transform: translate(-50%, -50%);\n"]))),FullPageLoader_FullPageLoader=function FullPageLoader(_ref){var children=_ref.children;return Object(jsx_runtime.jsx)(FullPage,{children:Object(jsx_runtime.jsxs)(Center,{children:[Object(jsx_runtime.jsx)(spin.a,{size:"large"}),children]})})};FullPageLoader_FullPageLoader.displayName="FullPageLoader";try{FullPageLoader_FullPageLoader.displayName="FullPageLoader",FullPageLoader_FullPageLoader.__docgenInfo={description:"",displayName:"FullPageLoader",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/components/FullPageLoader/index.tsx#FullPageLoader"]={docgenInfo:FullPageLoader_FullPageLoader.__docgenInfo,name:"FullPageLoader",path:"src/frontend/components/FullPageLoader/index.tsx#FullPageLoader"})}catch(__react_docgen_typescript_loader_error){}var decorators=__webpack_require__("./.storybook/decorators/index.ts"),index_stories_Default=(__webpack_exports__.default={title:"FullPageLoader",decorators:[decorators.a],component:FullPageLoader_FullPageLoader},function Default(){return Object(jsx_runtime.jsx)(FullPageLoader_FullPageLoader,{})});index_stories_Default.displayName="Default",index_stories_Default.parameters=Object.assign({storySource:{source:"() => {\n  return <FullPageLoader></FullPageLoader>\n}"}},index_stories_Default.parameters)},"./src/frontend/components/RegisterModal/index.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return index_stories_Default}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var decorators=__webpack_require__("./.storybook/decorators/index.ts"),objectDestructuringEmpty=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js"),modal=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/antd/es/modal/index.js")),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),RegisterModal_RegisterModal=function RegisterModal(_ref){return Object(objectDestructuringEmpty.a)(_ref),Object(jsx_runtime.jsxs)(modal.a,{title:"Basic Modal",visible:!0,children:[Object(jsx_runtime.jsx)("p",{children:"Some contents..."}),Object(jsx_runtime.jsx)("p",{children:"Some contents..."}),Object(jsx_runtime.jsx)("p",{children:"Some contents..."})]})};RegisterModal_RegisterModal.displayName="RegisterModal";try{RegisterModal_RegisterModal.displayName="RegisterModal",RegisterModal_RegisterModal.__docgenInfo={description:"",displayName:"RegisterModal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/components/RegisterModal/RegisterModal.tsx#RegisterModal"]={docgenInfo:RegisterModal_RegisterModal.__docgenInfo,name:"RegisterModal",path:"src/frontend/components/RegisterModal/RegisterModal.tsx#RegisterModal"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"RegisterModal",decorators:[decorators.a],component:RegisterModal_RegisterModal};var index_stories_Default=function Default(){return Object(jsx_runtime.jsx)(RegisterModal_RegisterModal,{})};index_stories_Default.displayName="Default",index_stories_Default.parameters=Object.assign({storySource:{source:"() => {\n  return <RegisterModal />\n}"}},index_stories_Default.parameters)},"./src/frontend/components/TempRegister/index.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return index_stories_Default}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/antd/dist/antd.css"),__webpack_require__("./node_modules/react/index.js");var regenerator=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),slicedToArray=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),es_form=(__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/antd/es/form/index.js")),notification=__webpack_require__("./node_modules/antd/es/notification/index.js"),es_layout=__webpack_require__("./node_modules/antd/es/layout/index.js"),row=__webpack_require__("./node_modules/antd/es/row/index.js"),col=__webpack_require__("./node_modules/antd/es/col/index.js"),input=__webpack_require__("./node_modules/antd/es/input/index.js"),es_button=__webpack_require__("./node_modules/antd/es/button/index.js"),react_router=__webpack_require__("./node_modules/react-router-dom/node_modules/react-router/esm/react-router.js"),useTranslation=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),axios=__webpack_require__("./node_modules/axios/index.js"),axios_default=__webpack_require__.n(axios),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),TempRegister_TempRegister=function TempRegister(){var inviteId=Object(react_router.b)().inviteId,history=Object(react_router.a)(),_Form$useForm=es_form.a.useForm(),form=Object(slicedToArray.a)(_Form$useForm,1)[0],t=Object(useTranslation.a)().t,onSubmit=function(){var _ref=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(values){var response;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,axios_default.a.post("https://api.remotify.place/user/temp-signup",Object.assign({password:"temporary",type:inviteId?"invitation":"temporary"},values,inviteId?{inviteId:decodeURIComponent(inviteId)}:void 0));case 3:(response=_context.sent).data.token&&(localStorage.setItem("userId",response.data.id),localStorage.setItem("token",response.data.token),localStorage.setItem("username",response.data.username),localStorage.setItem("roomName",response.data.roomName),localStorage.setItem("roomId",response.data.roomId),history.push("/")),_context.next=10;break;case 7:_context.prev=7,_context.t0=_context.catch(0),notification.a.error({message:t("cannot register")});case 10:case"end":return _context.stop()}}),_callee,null,[[0,7]])})));return function onSubmit(_x){return _ref.apply(this,arguments)}}();return Object(jsx_runtime.jsx)(es_layout.a,{style:{margin:"auto",height:"100%",display:"flex",justifyContent:"center"},children:Object(jsx_runtime.jsx)(row.a,{children:Object(jsx_runtime.jsx)(col.a,{span:"8",style:{margin:"auto"},children:Object(jsx_runtime.jsxs)(es_form.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{form:form,name:"basic",initialValues:{remember:!0},onFinish:onSubmit,children:[Object(jsx_runtime.jsx)("h1",{children:t("Welcome Stranger")}),!inviteId&&Object(jsx_runtime.jsx)("h3",{children:t("Unfortunately we don't recognise you.")}),!!inviteId&&Object(jsx_runtime.jsx)("h3",{children:t("Just enter your username and join the room.")}),Object(jsx_runtime.jsx)(es_form.a.Item,{label:t("Username"),name:"username",rules:[{required:!0,message:t("Please input your username!")}],children:Object(jsx_runtime.jsx)(input.a,{})}),!inviteId&&Object(jsx_runtime.jsx)(es_form.a.Item,{label:t("Room name"),name:"roomName",extra:t("Give your room a meaningful name."),rules:[{required:!0,message:"Please input your desired room name!"}],children:Object(jsx_runtime.jsx)(input.a,{})}),Object(jsx_runtime.jsx)(es_form.a.Item,Object.assign({},{wrapperCol:{offset:8,span:16}},{children:Object(jsx_runtime.jsx)(es_button.a,{type:"primary",htmlType:"submit",children:t(inviteId?"Join Room":"Create")})}))]}))})})})};TempRegister_TempRegister.displayName="TempRegister";try{TempRegister_TempRegister.displayName="TempRegister",TempRegister_TempRegister.__docgenInfo={description:"",displayName:"TempRegister",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/components/TempRegister/index.tsx#TempRegister"]={docgenInfo:TempRegister_TempRegister.__docgenInfo,name:"TempRegister",path:"src/frontend/components/TempRegister/index.tsx#TempRegister"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"hallo"};var index_stories_Default=function Default(){return Object(jsx_runtime.jsx)(TempRegister_TempRegister,{})};index_stories_Default.displayName="Default",index_stories_Default.parameters=Object.assign({storySource:{source:"() => <TempRegister />"}},index_stories_Default.parameters)},"./src/frontend/components/Video/Video.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Video_stories_Default}));var _templateObject,regenerator=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),slicedToArray=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=(__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js")),taggedTemplateLiteralLoose=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteralLoose.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),VideoStyled=styled_components_browser_esm.a.video(_templateObject||(_templateObject=Object(taggedTemplateLiteralLoose.a)(["\n  width: 100%;\n"]))),Video_VideoComponent=function VideoComponent(_ref,ref){var onPlaying=_ref.onPlaying,mediaStream=_ref.mediaStream,readyToPlay=_ref.readyToPlay,system=function getMobileOperatingSystem(){var userAgent=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(userAgent)?"Windows Phone":/android/i.test(userAgent)?"Android":/iPad|iPhone|iPod/.test(userAgent)&&!window.MSStream?"iOS":"unknown"}(),videoRef=(Object.assign({},function getResolutionByOs(os){return console.log("os",os),"iOS"===os?{width:{ideal:1920},height:{ideal:1080}}:{width:{ideal:1080},height:{ideal:1920}}}(system),{facingMode:"environment"}),Object(react.useRef)(null));Object(react.useImperativeHandle)(ref,(function(){return{playVideo:(_playVideo=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!videoRef||!videoRef.current){_context.next=5;break}return console.log("start playing video"),_context.abrupt("return",videoRef.current.play());case 5:console.log("cannot play, video ref not there");case 6:case"end":return _context.stop()}}),_callee)}))),function playVideo(){return _playVideo.apply(this,arguments)}),getVideoElement:function getVideoElement(){return videoRef.current}};var _playVideo}));return Object(react.useEffect)((function(){mediaStream&&function requestVideoSuccess(stream){videoRef&&videoRef.current&&(videoRef.current.srcObject=stream,console.log("setting media stream to video"),readyToPlay&&readyToPlay())}(mediaStream)}),[mediaStream]),Object(jsx_runtime.jsx)(VideoStyled,{ref:videoRef,playsInline:!0,onPlay:function onPlay(){return console.log("onPlay")},onPlayCapture:function onPlayCapture(){return console.log("onPlayCapture")},onPlaying:onPlaying,muted:!0})};Video_VideoComponent.displayName="VideoComponent";var Video=Object(react.forwardRef)(Video_VideoComponent);try{Video.displayName="Video",Video.__docgenInfo={description:"",displayName:"Video",props:{onPlaying:{defaultValue:null,description:"",name:"onPlaying",required:!1,type:{name:"(() => void)"}},readyToPlay:{defaultValue:null,description:"",name:"readyToPlay",required:!1,type:{name:"(() => void)"}},mediaStream:{defaultValue:null,description:"",name:"mediaStream",required:!1,type:{name:"MediaStream"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/frontend/components/Video/Video.tsx#Video"]={docgenInfo:Video.__docgenInfo,name:"Video",path:"src/frontend/components/Video/Video.tsx#Video"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"Video"};var Video_stories_Default=function Default(){var ref=Object(react.useRef)(null),_useState=Object(react.useState)(!1),_useState2=Object(slicedToArray.a)(_useState,2),setVisible=(_useState2[0],_useState2[1]);return Object(react.useEffect)((function(){Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:try{setVisible(!0)}catch(e){console.log("error requesting video",e)}case 1:case"end":return _context.stop()}}),_callee)})))()}),[ref]),Object(jsx_runtime.jsx)(Video,{ref:ref})};Video_stories_Default.displayName="Default",Video_stories_Default.parameters=Object.assign({storySource:{source:"() => {\n  const ref = useRef<ElementRef<typeof Video> | null>(null)\n  const [visible, setVisible] = useState<boolean>(false)\n  useEffect(() => {\n    ;(async function () {\n      try {\n        // @ts-ignore\n        // await ref?.current?.requestVideo()\n        setVisible(true)\n      } catch (e) {\n        console.log('error requesting video', e)\n      }\n    })()\n  }, [ref])\n  return <Video ref={ref} />\n}"}},Video_stories_Default.parameters)},"./src/game/gameobjects/gameObjectIds.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"GAME_OBJECT_ID_DESK",(function(){return GAME_OBJECT_ID_DESK})),__webpack_require__.d(__webpack_exports__,"GAME_OBJECT_ID_TOILET",(function(){return GAME_OBJECT_ID_TOILET})),__webpack_require__.d(__webpack_exports__,"GAME_OBJECT_ID_MENU",(function(){return GAME_OBJECT_ID_MENU}));var GAME_OBJECT_ID_DESK="DESK_ID",GAME_OBJECT_ID_TOILET="TOILET_ID",GAME_OBJECT_ID_MENU="MENU"},"./src/game/gameobjects/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GAME_OBJECT_DATA_KEY_ID})),__webpack_require__.d(__webpack_exports__,"b",(function(){return PlaceObjectsTypes})),__webpack_require__.d(__webpack_exports__,"c",(function(){return TILE_WIDTH})),__webpack_require__.d(__webpack_exports__,"d",(function(){return TypeToDataId}));var _TypeToDataId,PlaceObjectsTypes,gameObjectIds=__webpack_require__("./src/game/gameobjects/gameObjectIds.ts"),classCallCheck=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),createClass=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),regenerator=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),toConsumableArray=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),assertThisInitialized=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),get=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js"),getPrototypeOf=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),inherits=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),createSuper=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js"),phaser=(__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/phaser/dist/phaser.js")),phaser_default=__webpack_require__.n(phaser),dist=__webpack_require__("./node_modules/@remotify/models/dist/index.js"),utils=__webpack_require__("./src/game/utils/index.ts"),constants=(__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./src/constants/index.ts")),GAME_OBJECT_DATA_KEY_ID=(phaser_default.a.GameObjects.Container,"id"),i18n=(__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./src/i18n/index.tsx")),models=(phaser_default.a.GameObjects.Container,__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./src/models/index.ts"));phaser_default.a.GameObjects.Sprite;!function(PlaceObjectsTypes){PlaceObjectsTypes.Desk="desk",PlaceObjectsTypes.Toilet="toilet"}(PlaceObjectsTypes||(PlaceObjectsTypes={}));var TILE_WIDTH=30,TypeToDataId=((_TypeToDataId={})[PlaceObjectsTypes.Desk]=gameObjectIds.GAME_OBJECT_ID_DESK,_TypeToDataId[PlaceObjectsTypes.Toilet]=gameObjectIds.GAME_OBJECT_ID_TOILET,_TypeToDataId)},"./src/game/utils/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Draggable_Draggable})),__webpack_require__.d(__webpack_exports__,"b",(function(){return createAnimations})),__webpack_require__.d(__webpack_exports__,"c",(function(){return onClickDetected})),__webpack_require__.d(__webpack_exports__,"d",(function(){return whenDrag_whenDrag}));var classCallCheck=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),createClass=__webpack_require__("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),phaser=__webpack_require__("./node_modules/phaser/dist/phaser.js"),PhaserEvents=phaser.Input.Events,Draggable_Draggable=function(){function Draggable(){var _this=this;Object(classCallCheck.a)(this,Draggable),this.isPointerDown=!1,this.isDragStarted=!1,this.scene=void 0,this.pointerDown=function(pointer,gameObjects){whenDrag_whenDrag(pointer,(function(){var _this$scene,_this$scene2;console.log("when drag"),_this.isDragStarted=!0,_this.isPointerDown=!0,_this.dragStart(pointer),null===(_this$scene=_this.scene)||void 0===_this$scene||_this$scene.input.on(PhaserEvents.POINTER_MOVE,_this.pointerMove),null===(_this$scene2=_this.scene)||void 0===_this$scene2||_this$scene2.input.on(PhaserEvents.POINTER_UP,_this.pointerUp)}))},this.pointerMove=function(pointer){_this.isPointerDown&&_this.drag(pointer)},this.pointerUp=function(){var _this$scene3,_this$scene4;_this.dragStop(),_this.isDragStarted=!1,_this.isPointerDown=!1,null===(_this$scene3=_this.scene)||void 0===_this$scene3||_this$scene3.input.off(PhaserEvents.POINTER_MOVE,_this.pointerMove),null===(_this$scene4=_this.scene)||void 0===_this$scene4||_this$scene4.input.off(PhaserEvents.POINTER_UP,_this.pointerUp)}}return Object(createClass.a)(Draggable,[{key:"registerEvents",value:function registerEvents(){var _this$scene5;null===(_this$scene5=this.scene)||void 0===_this$scene5||_this$scene5.input.on(PhaserEvents.POINTER_DOWN,this.pointerDown)}},{key:"unregisterEvents",value:function unregisterEvents(){var _this$scene6;null===(_this$scene6=this.scene)||void 0===_this$scene6||_this$scene6.input.off(PhaserEvents.POINTER_DOWN,this.pointerDown)}}]),Draggable}(),createAnimations=(__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.object.values.js"),__webpack_require__("./src/game/gameobjects/gameObjectIds.ts"),__webpack_require__("./src/game/gameobjects/index.ts"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),function createAnimations(spriteModel,gameObject){var animations=spriteModel.animations;Array.isArray(animations)?animations.forEach((function(animation){return function createAnimation(animation){gameObject.scene.anims.create(Object.assign({key:animation.key,frames:gameObject.scene.anims.generateFrameNumbers(spriteModel.name,{frames:animation.frames})},animation.settings))}(animation)})):console.warn("no animations found :*(")}),onClickDetected_PhaserEvents=(__webpack_require__("./node_modules/core-js/modules/es.regexp.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./src/models/index.ts"),new RegExp("interaction_","g"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/web.timers.js"),phaser.Input.Events),onClickDetected=function onClickDetected(gameObject,listener){var intervalId,isGameObjectDown=!1,milliseconds=0,initialPoint={x:0,y:0},gameObjectDown=function gameObjectDown(pointer){initialPoint={x:pointer.x,y:pointer.y},intervalId=window.setInterval((function(){return milliseconds+=4}),4),isGameObjectDown=!0},gameObjectUp=function gameObjectUp(pointer,gameObject){isGameObjectDown&&(intervalId&&clearInterval(intervalId),isClick(pointer)&&listener(pointer,gameObject),isGameObjectDown=!1,intervalId=void 0,milliseconds=0)},isClick=function isClick(pointer){return Math.abs(initialPoint.x-pointer.x)<30&&Math.abs(initialPoint.y-pointer.y)<30||milliseconds<1e3};gameObject.on(onClickDetected_PhaserEvents.POINTER_DOWN,gameObjectDown),gameObject.on(onClickDetected_PhaserEvents.POINTER_UP,gameObjectUp);return function unsubscribe(){gameObject.off(onClickDetected_PhaserEvents.GAMEOBJECT_DOWN,gameObjectDown),gameObject.off(onClickDetected_PhaserEvents.GAMEOBJECT_UP,gameObjectUp)}},whenDrag_whenDrag=function whenDrag(initialPointer,callback){var intervalId,scene=initialPointer.camera.scene,milliseconds=0,initialPoint_x=initialPointer.x,initialPoint_y=initialPointer.y,reportPositiveDrag=function reportPositiveDrag(){unregisterEvents(),callback()};intervalId=window.setInterval((function(){(milliseconds+=4)>1e3&&reportPositiveDrag()}),4);var unregisterEvents=function unregisterEvents(){intervalId&&clearInterval(intervalId),intervalId=void 0,scene.input.off(phaser.Input.Events.POINTER_MOVE,pointerMove),scene.input.off(phaser.Input.Events.POINTER_UP,pointerUp)},pointerMove=function pointerMove(pointer){(Math.abs(initialPoint_x-pointer.x)>30||Math.abs(initialPoint_y-pointer.y)>30)&&reportPositiveDrag()},pointerUp=function pointerUp(){unregisterEvents()};scene.input.on(phaser.Input.Events.POINTER_MOVE,pointerMove),scene.input.on(phaser.Input.Events.POINTER_UP,pointerUp)}},"./src/i18n/index.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";var i18next__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/i18next/dist/esm/i18next.js"),react_i18next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-i18next/dist/es/context.js"),_languages_en_json__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/i18n/languages/en.json"),resources={en:{translation:_languages_en_json__WEBPACK_IMPORTED_MODULE_2__}};i18next__WEBPACK_IMPORTED_MODULE_0__.a.use(react_i18next__WEBPACK_IMPORTED_MODULE_1__.e).init({resources:resources,lng:"en",keySeparator:!1,interpolation:{escapeValue:!1}}),__webpack_exports__.a=i18next__WEBPACK_IMPORTED_MODULE_0__.a},"./src/i18n/languages/en.json":function(module){module.exports=JSON.parse('{"Welcome Stranger":"Welcome Stranger :)","Unfortunately we don\'t recognise you.":"Unfortunately we don\'t recognise you.","Give your room a meaningful name":"Give your room a meaningful name","Please input your username!":"Please input your username!","Room name":"Room name","Create":"Create","Drag":"Drag","Draw Wall":"Draw Wall","Draw Floor":"Draw Floor","Place Objects":"Place Objects","Edit Game Object title desk":"Edit Desk","Edit Game Object title toilet":"Edit Toilet","Save":"Save","Cancel":"Cancel","Delete":"Delete","Someones desk":"{{someone}}`s desk","Select Desk owner":"Select Desk owner","Desk owner":"Desk owner","interaction_desk_work_hard":"work hard","interaction_desk_sleep":"sleep","interaction_desk_punch_the_display":"punch the display","interaction_desk_hear_music":"hear music","interaction_toilet_take_a_dump":"take a dump","interaction_toilet_take_a_pee":"take a pee","interaction_toilet_flush":"flush","Edit Mode":"Edit Mode","Room":"Room"}')},"./src/models/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return ToiletContent})),__webpack_require__.d(__webpack_exports__,"e",(function(){return gameObject_getSettingsByType})),__webpack_require__.d(__webpack_exports__,"d",(function(){return ToiletInteractions})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ToiletAnimations})),__webpack_require__.d(__webpack_exports__,"a",(function(){return AnimationTypes}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var ToiletContent,gameobjects=__webpack_require__("./src/game/gameobjects/index.ts");!function(ToiletContent){ToiletContent.pee="pee",ToiletContent.dump="dump"}(ToiletContent||(ToiletContent={}));var DeskInteractions,ToiletInteractions,gameObject_getSettingsByType=function getSettingsByType(type,settings){return type===gameobjects.b.Toilet?Object.assign({},settings):settings};!function(DeskInteractions){DeskInteractions.work_hard="work_hard",DeskInteractions.sleep="sleep",DeskInteractions.punch_the_display="punch_the_display",DeskInteractions.hear_music="hear_music"}(DeskInteractions||(DeskInteractions={})),function(ToiletInteractions){ToiletInteractions.take_a_dump="toilet_take_a_dump",ToiletInteractions.take_a_pee="toilet_take_a_pee",ToiletInteractions.flush="toilet_flush"}(ToiletInteractions||(ToiletInteractions={}));var DeskAnimations,ToiletAnimations,PlayerAnimations,AnimationTypes;!function(DeskAnimations){DeskAnimations.idle="desk_idle"}(DeskAnimations||(DeskAnimations={})),function(ToiletAnimations){ToiletAnimations.idle="toilet_idle",ToiletAnimations.dump="toilet_dump",ToiletAnimations.pee="toilet_pee"}(ToiletAnimations||(ToiletAnimations={})),function(PlayerAnimations){PlayerAnimations.idle="player_idle",PlayerAnimations.walk="player_walk"}(PlayerAnimations||(PlayerAnimations={})),function(AnimationTypes){AnimationTypes.deskAnimation="desk_animation",AnimationTypes.deskInteraction="desk_interaction",AnimationTypes.toiletAnimation="toilet_animation",AnimationTypes.toiletInteraction="toilet_interaction"}(AnimationTypes||(AnimationTypes={}))},"./storybook-init-framework-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},0:function(module,exports,__webpack_require__){__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_require__("./storybook-init-framework-entry.js"),__webpack_require__("./node_modules/@storybook/addon-essentials/node_modules/@storybook/addon-docs/dist/esm/frameworks/common/config.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-essentials/node_modules/@storybook/addon-docs/dist/esm/frameworks/react/config.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-links/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/preset/addArgs.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-backgrounds/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-backgrounds/dist/esm/preset/addParameter.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-measure/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-outline/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./.storybook/preview.js-generated-config-entry.js"),module.exports=__webpack_require__("./generated-stories-entry.js")},1:function(module,exports){}},[[0,5,6]]]);